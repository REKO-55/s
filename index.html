<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>REKO CRASH V7.5 - CONFIDENCE PRO</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Cairo:wght@900&display=swap" rel="stylesheet">
    <style>
        :root { --gold: #D4AF37; --cyan: #00f2ff; --bg: #010206; --green: #00ff41; --red: #ff003c; --gray: #222; }
        body { background: var(--bg); color: #fff; font-family: 'Cairo', sans-serif; margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* شاشة الرادار والمؤشر */
        .master-display { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, #0a1b3a 0%, #010206 100%); border-bottom: 2px solid var(--gold); position: relative; }
        .prediction-val { font-family: 'Orbitron', sans-serif; font-size: 75px; color: var(--cyan); text-shadow: 0 0 35px var(--cyan); }
        
        /* مؤشر الثقة الذكي */
        .confidence-meter { margin-top: 10px; width: 200px; text-align: center; }
        .meter-bar { height: 6px; width: 100%; background: var(--gray); border-radius: 10px; overflow: hidden; margin-top: 5px; }
        #fill { height: 100%; width: 0%; background: var(--green); transition: 0.8s ease-in-out; }
        #conf-text { font-family: 'Orbitron'; font-size: 14px; color: var(--gold); }

        /* الحقول الأربعة */
        .fields-row { display: flex; gap: 10px; margin-top: 20px; }
        .f-node { width: 60px; height: 45px; background: rgba(0,0,0,0.7); border: 2px solid var(--gray); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 15px; color: #fff; font-family: 'Orbitron'; transition: 0.3s; }
        .f-node.filled { border-color: var(--gold); box-shadow: 0 0 10px rgba(212,175,55,0.3); }

        /* لوحة التحكم */
        .cockpit { height: 50vh; background: #050a14; border-top: 3px solid var(--gold); border-radius: 40px 40px 0 0; padding: 15px; display: flex; flex-direction: column; justify-content: space-between; }
        .grid-pad { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .p-btn { background: #000; border: 1px solid #1a2a4a; padding: 18px 5px; border-radius: 15px; font-size: 20px; color: #fff; font-family: 'Orbitron'; cursor: pointer; }
        .p-btn:active { transform: scale(0.9); background: var(--gold); color: #000; }

        .btn-launch-ai { width: 100%; padding: 18px; background: linear-gradient(180deg, var(--gold), #8a6e00); border: none; border-radius: 50px; color: #000; font-size: 22px; font-weight: bold; cursor: pointer; box-shadow: 0 0 30px var(--gold); }
    </style>
</head>
<body>

    <div class="master-display">
        <div style="position: absolute; top: 15px; color: #444; font-size: 9px; letter-spacing: 2px;">V7.5 - CONFIDENCE RATIO ENGINE</div>
        <div class="prediction-val" id="out-x">READY</div>
        
        <div class="confidence-meter">
            <div id="conf-text">CONFIDENCE: 0%</div>
            <div class="meter-bar"><div id="fill"></div></div>
        </div>

        <div class="fields-row" id="nodes">
            <div class="f-node">-</div><div class="f-node">-</div>
            <div class="f-node">-</div><div class="f-node">-</div>
        </div>
    </div>

    <div class="cockpit">
        <div id="status" style="text-align: center; font-size: 11px; color: var(--gold);">تغذية الحقول الأربعة مطلوبة...</div>
        
        <div class="grid-pad" id="pad"></div>

        <button class="btn-launch-ai" onclick="runConfidenceAI()">تفعيل المحرك + كشف الثقة</button>
    </div>

    <script>
        let history = [];
        const blastKeys = ["1.1", "1.5", "2.0", "3.1", "4.8", "6.2", "10", "MAX"];

        function build() {
            const p = document.getElementById('pad');
            blastKeys.forEach(v => {
                let b = document.createElement('button');
                b.className = 'p-btn'; b.innerText = v;
                b.onclick = () => { if(history.length >= 4) history.shift(); history.push(v); updateUI(); };
                p.appendChild(b);
            });
        }

        function updateUI() {
            const nodes = document.getElementById('nodes').children;
            for(let i=0; i<4; i++) {
                nodes[i].innerText = history[i] || "-";
                nodes[i].className = history[i] ? "f-node filled" : "f-node";
            }
        }

        function runConfidenceAI() {
            if(history.length < 4) { alert("أكمل الحقول الأربعة يا إمبراطور"); return; }
            
            const out = document.getElementById('out-x');
            const fill = document.getElementById('fill');
            const confT = document.getElementById('conf-text');
            const st = document.getElementById('status');

            st.innerText = "⏳ جاري حساب التوافق مع السيرفر...";
            out.style.opacity = "0.2";
            fill.style.width = "0%";

            setTimeout(() => {
                let nums = history.map(h => parseFloat(h.replace('MAX', '15')));
                let avg = nums.reduce((a, b) => a + b, 0) / 4;
                let last = nums[3];
                let prediction, confidence;

                // حساب التوقع والثقة بناءً على أشهر المحركات
                if (last < 1.3) {
                    prediction = (avg * 1.5 + Math.random()).toFixed(2);
                    confidence = Math.floor(85 + Math.random() * 10); // ثقة عالية عند التعويض
                } else if (last > 5) {
                    prediction = (1.15 + Math.random() * 0.3).toFixed(2);
                    confidence = Math.floor(90 + Math.random() * 8); // ثقة عالية في سحب السيولة
                } else {
                    prediction = (avg * 0.9 + Math.random()).toFixed(2);
                    confidence = Math.floor(60 + Math.random() * 20); // ثقة متوسطة في الاستقرار
                }

                out.innerText = prediction + "x";
                out.style.opacity = "1";
                out.style.color = (prediction > 2) ? "var(--green)" : "var(--cyan)";
                
                // تحديث المؤشر
                confT.innerText = `CONFIDENCE: ${confidence}%`;
                fill.style.width = `${confidence}%`;
                fill.style.background = (confidence > 80) ? "var(--green)" : (confidence > 60) ? "var(--gold)" : "var(--red)";
                
                st.innerText = "✅ تم استخراج الاحتمال بنسبة ثقة دقيقة";
            }, 800);
        }

        build();
    </script>
</body>
</html>
